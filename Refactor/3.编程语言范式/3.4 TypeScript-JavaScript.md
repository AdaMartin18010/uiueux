# 3.4 JavaScript / TypeScript 编程范式

> 本文档归档并分析 Web 生态的基石语言——JavaScript 及其超集 TypeScript 的核心编程范式。重点在于从动态类型到静态类型的演进，以及它们如何支撑起现代 Web 开发。

## 目录

- [3.4.1 JavaScript: 动态与多范式](#341-javascript-动态与多范式)
- [3.4.2 TypeScript: 为JavaScript添加类型](#342-typescript-为javascript添加类型)
- [3.4.3 异步编程模型：从回调到Async/Await](#343-异步编程模型从回调到asyncawait)
- [3.4.4 在UI开发中的应用](#344-在ui开发中的应用)

---

### 3.4.1 JavaScript: 动态与多范式

JavaScript 是一种高度灵活的多范式语言。

| 范式 | 在 JavaScript 中的体现 | 代码示例 |
| :--- | :--- | :--- |
| **原型继承 (Prototypal Inheritance)** | 对象直接从其他对象继承。ES6的 `class` 只是原型继承的语法糖。 | `const obj2 = Object.create(obj1);` |
| **函数式编程** | 函数是一等公民，支持闭包、高阶函数，`Array.prototype` 上有丰富的函数式方法。 | `[1, 2, 3].map(n => n * 2);` |
| **事件驱动 (Event-Driven)** | 基于事件循环 (Event Loop) 和回调函数，天然适合处理UI交互等异步任务。 | `button.addEventListener('click', () => { ... });` |

- **核心机制：事件循环 (Event Loop)**
    - JavaScript 引擎本身是单线程的，但通过事件循环模型实现了非阻塞I/O。
    - **调用栈 (Call Stack)** -> **Web API** -> **任务队列 (Task Queue)** -> **事件循环**，这个模型是理解JS异步行为的关键。

### 3.4.2 TypeScript: 为JavaScript添加类型

TypeScript 是 JavaScript 的一个超集，它在编译时添加了静态类型检查，但在运行时会被编译成纯 JavaScript。

| 特性 | 描述 | 对开发的影响 |
| :--- | :--- | :--- |
| **静态类型系统** | 提供了 `number`, `string`, `interface`, `enum`, `generic` 等类型。 | **可靠性**: 在编码阶段就能发现大量潜在错误。<br>**可维护性**: 类型即文档，代码更易于理解和重构。<br>**工具支持**: 提供了强大的自动补全、重构和代码导航能力。 |
| **结构化类型 (Structural Typing)** | 也称"鸭子类型"。只要对象的结构（形状）符合类型的要求，就被认为是该类型，不关心其具体实现。 | **灵活性**: 相比于只关心名称的名义化类型(Nominal Typing)，结构化类型更适合JS这种动态语言的本质。 |
| **类型推断 (Type Inference)** | TS编译器能自动推断出许多变量和返回值的类型，无需显式注解。 | **简洁性**: 在保证类型安全的同时，避免了冗余的类型标注。 |

```typescript
// 接口定义了对象的"形状"
interface Point {
    x: number;
    y: number;
}

// pt 的结构符合 Point，所以类型检查通过
function logPoint(pt: Point) {
    console.log(`x: ${pt.x}, y: ${pt.y}`);
}
```

### 3.4.3 异步编程模型：从回调到Async/Await

| 异步方案 | 示例 | 优点 | 缺点 |
| :--- | :--- | :--- | :--- |
| **回调函数 (Callbacks)** | `fs.readFile('file.txt', (err, data) => { ... });` | 简单直接 | 回调地狱 (Callback Hell)，代码难以维护 |
| **Promise** | `fetch(url).then(res => res.json()).catch(err => ...);` | 链式调用，解决了回调地狱 | 语法依然冗余，错误处理分散 |
| **`async/await`** | `async function() { try { const data = await fetch(url); } catch(e) {} }` | 同步代码的写法，可读性极高 | 容易忘记 `await`，导致非预期行为 |

`async/await` 是 Promise 的语法糖，是目前现代JS/TS中处理异步操作的最佳实践。

### 3.4.4 在UI开发中的应用

JavaScript/TypeScript 是所有现代Web前端框架的基石。

- **框架语言**: 无论是 React, Vue, Angular 还是 Svelte，最终都运行在JS环境之上。TypeScript 已成为开发大型前端应用的事实标准。
- **DOM 操作**: JS是唯一可以直接操作浏览器文档对象模型(DOM)的语言。
- **Node.js**: 将JS的应用场景从浏览器扩展到了服务器端，实现了全栈开发。
- **相关主题**:
    - [前端主流框架](../2.技术栈与框架/2.1%20前端主流框架.md)
    - [Web端架构](../1.终端类型/1.1%20Web端.md)
